<meta name="theme-color" content="#000000">

<body style="background-color: black;">
  
  <div id="result" style="position:fixed; top:0; left:0; bottom:0; right:0; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999; color: white;">
  <code id="stuf">
  Running
  </code><code id="running-text">
  </code>
  <div>
    
  </div>
    <div id="space">
    ‏‏‎
  </div>
  </div>
  <script>
    var int = 0;
   var dots = window.setInterval( function() {
    var wait = document.getElementById("running-text");
    if ( wait.innerHTML.length > 2 ) 
        wait.innerHTML = "";
    else 
        wait.innerHTML+= ".";
    }, 300);
    
    document.onkeydown=function(e){
      e.preventDefault();
    }
  document.body.contentEditable=true;
    
    var txt=document.getElementById('running-text');
      var thing1=document.getElementById('space');
          var thing2=document.getElementById('stuf');

      var request = new XMLHttpRequest();
      
      request.open("POST", "https://ocamljs.seven7four4.repl.co/");

      request.setRequestHeader('Content-type', 'application/json');


      request.send(JSON.stringify({
code: decodeURIComponent(new URLSearchParams(location.search).get('code'))
      }));

  request.onreadystatechange = function() {
      console.log=function(stuff){
            int = int + 1;
            hist = [];
var elem=document.createElement('code');
elem.innerText=stuff;
hist.push(stuff);
var n = hist.length - 1;
      document.querySelector('#result').appendChild(elem);
      document.querySelector('#result').appendChild(document.createElement('div'));
    };
    if (!request.response.includes(`There was an error compiling your code!`)){  eval(request.response);  if (request.readyState === 4) {
      
var wait = document.getElementById("result");
      clearInterval(dots);

          thing1.remove();
    thing2.remove();
      txt.innerHTML="";
      
var resElement=document.createElement('code');
  document.querySelector('#result').appendChild(resElement);
  var select = document.getElementById('result');
  select.removeChild(select.lastChild);
    select.removeChild(select.lastChild);
        select.removeChild(select.lastChild);    }
    }
  else {
    var wait = document.getElementById("result");
      clearInterval(dots);

          thing1.remove();
    thing2.remove();
      txt.innerHTML="";
      
var resElement=document.createElement('code');
  resElement.innerText=request.response;
  if (int == 1){
  document.querySelector('#result').appendChild(resElement);
  }
  }
  };
  
  </script>
  </body>
  